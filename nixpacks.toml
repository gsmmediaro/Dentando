[phases.setup]
aptPkgs = ["libgl1", "libglib2.0-0", "libsm6", "libxext6", "ffmpeg"]

[phases.install]
cmds = [
  "python -m pip install --upgrade pip",
  "python -m pip install -r requirements.txt",
  "python -m pip uninstall -y opencv-python opencv-contrib-python || true",
  "python -m pip install --no-cache-dir --force-reinstall \"opencv-python-headless>=4.10.0\"",
]

[start]
cmd = "uvicorn web.backend.main:app --host 0.0.0.0 --port ${PORT:-8000}"
